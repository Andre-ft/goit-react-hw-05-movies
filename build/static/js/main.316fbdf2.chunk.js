(this["webpackJsonpgoit-react-hw-05-movies"]=this["webpackJsonpgoit-react-hw-05-movies"]||[]).push([[0],{12:function(e,t,c){e.exports={Searchbar:"Searchbar_Searchbar__3aBQ8",SearchForm:"Searchbar_SearchForm__t5Z3s",SearchForm_button:"Searchbar_SearchForm_button__1j47W",SearchForm_button_label:"Searchbar_SearchForm_button_label__3o230",SearchForm_input:"Searchbar_SearchForm_input__3qVNL"}},13:function(e,t,c){e.exports={link:"Navigation_link__aeEpH",activeLink:"Navigation_activeLink__2-4Wx Navigation_link__aeEpH"}},19:function(e,t,c){e.exports={container:"MovieDetailsPage_container__10BCA",inner_block:"MovieDetailsPage_inner_block__2jIA6"}},20:function(e,t,c){e.exports={img_block:"Cast_img_block__2HKIH",img:"Cast_img__FTYA-"}},25:function(e,t,c){e.exports={header:"Appbar_header__2Ii1U"}},26:function(e,t,c){e.exports={container:"Container_container__FULKK"}},27:function(e,t,c){e.exports={title:"PageHeading_title__2E7r2"}},29:function(e,t,c){e.exports={MoviesPage:"MoviesPage_MoviesPage__3_xj_"}},41:function(e,t,c){},43:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(10),i=c.n(r),o=c(4),s=c(2),l=c(13),j=c.n(l),u=c(1),b=function(){return Object(u.jsxs)("nav",{children:[Object(u.jsx)(o.c,{exact:!0,to:"/",className:j.a.link,activeClassName:j.a.activeLink,children:"Home"}),Object(u.jsx)(o.c,{exact:!0,to:"/movies",className:j.a.link,activeClassName:j.a.activeLink,children:"Movies"})]})},h=c(25),d=c.n(h);function O(){return Object(u.jsx)("header",{className:d.a.header,children:Object(u.jsx)(b,{})})}var m=c(26),v=c.n(m);function x(e){var t=e.children;return Object(u.jsx)("div",{className:v.a.container,children:t})}var f=c(7),_=c(27),p=c.n(_);function g(e){var t=e.text;return Object(u.jsx)("h1",{className:p.a.title,children:t})}var S=c(28),k=c(18),y=c.n(k),N="9f0e1a5db1805e19173b01041df22dc3",F="https://api.themoviedb.org/3/";function w(){return C.apply(this,arguments)}function C(){return C=Object(S.a)(y.a.mark((function e(){var t,c,n,a=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",c=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,fetch(t,c);case 4:if(!(n=e.sent).ok){e.next=11;break}return e.next=8,n.json();case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=Promise.reject(new Error("Not found"));case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function E(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),c=t[0],a=t[1],r=Object(s.i)().url,i=Object(s.g)();return Object(n.useEffect)((function(){w("".concat(F,"/trending/movie/day?api_key=").concat(N)).then((function(e){a(e.results)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(g,{text:"Trending today"}),c&&Object(u.jsx)("ul",{children:c.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:{pathname:"".concat(r,"movies/").concat(e.id),state:{from:{location:i,label:"Back to Trendings today"}}},children:e.title})},e.id)}))})]})}var I=c(19),P=c.n(I),M=c(20),L=c.n(M);function q(e){var t=e.movieId,c=Object(n.useState)(null),a=Object(f.a)(c,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){(function(e){return w("".concat(F,"movie/").concat(e,"/credits?api_key=").concat(N))})(t).then((function(e){return i(e.cast)}))}),[t]),Object(u.jsxs)(u.Fragment,{children:[console.log("castArray",r),r&&Object(u.jsx)("ul",{children:r.map((function(e){return Object(u.jsxs)("li",{children:[Object(u.jsx)("h3",{children:e.name}),Object(u.jsx)("div",{className:L.a.img_block,children:Object(u.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w300").concat(e.profile_path),alt:e.name,className:L.a.img})}),Object(u.jsxs)("p",{children:["Character: ",e.character]})]},e.id)}))})]})}c(41);function B(e){var t=e.movieId,c=Object(n.useState)(null),a=Object(f.a)(c,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){(function(e){return w("".concat(F,"movie/").concat(e,"/reviews?api_key=").concat(N))})(t).then((function(e){return i(e.results)}))}),[t]),Object(u.jsxs)(u.Fragment,{children:[console.log("reviews",r),r&&r.length>0&&Object(u.jsx)("ul",{children:r.map((function(e){return Object(u.jsxs)("li",{children:[Object(u.jsx)("h3",{children:e.author}),Object(u.jsx)("p",{children:e.content})]},e.created_at)}))}),r&&0===r.length&&Object(u.jsx)("p",{children:"We don't have any reviews for this movie"})]})}function H(){var e,t,c,a=Object(s.h)().movieId,r=Object(n.useState)(null),i=Object(f.a)(r,2),l=i[0],j=i[1],b=Object(s.i)(),h=b.url,d=b.path,O=Object(s.f)(),m=Object(s.g)();Object(n.useEffect)((function(){(function(e){return w("".concat(F,"/movie/").concat(e,"?api_key=").concat(N))})(a).then(j),console.log("history",O),console.log("location",m)}),[a]);return Object(u.jsxs)(u.Fragment,{children:[l&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{type:"button",onClick:function(){var e,t,c;O.push(null!==(e=null===m||void 0===m||null===(t=m.state)||void 0===t||null===(c=t.from)||void 0===c?void 0:c.location)&&void 0!==e?e:"/movies")},children:null!==(e=null===m||void 0===m||null===(t=m.state)||void 0===t||null===(c=t.from)||void 0===c?void 0:c.label)&&void 0!==e?e:"Go Back"}),Object(u.jsxs)("div",{className:P.a.container,children:[Object(u.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w300").concat(l.poster_path),alt:l.title}),Object(u.jsxs)("div",{className:P.a.inner_block,children:[Object(u.jsx)("h2",{children:l.title}),Object(u.jsxs)("p",{children:["User Score: ",10*l.vote_average,"%"]}),Object(u.jsx)("h2",{children:"Overview"}),Object(u.jsx)("div",{children:l.overview}),Object(u.jsx)("h2",{children:"Genres"}),Object(u.jsx)("div",{children:l.genres.map((function(e){return"".concat(e.name," ")}))})]})]}),Object(u.jsx)("hr",{}),Object(u.jsx)(o.c,{to:"".concat(h,"/cast"),children:"Cast"}),Object(u.jsx)("br",{}),Object(u.jsx)(o.c,{to:"".concat(h,"/reviews"),children:"Reviews"}),Object(u.jsx)("hr",{})]}),Object(u.jsx)(s.a,{path:"".concat(d,"/cast"),children:Object(u.jsx)(q,{movieId:a})}),Object(u.jsx)(s.a,{path:"".concat(d,"/reviews"),children:Object(u.jsx)(B,{movieId:a})})]})}var A=c(21),T=c(29),U=c.n(T),W=c(14),D=c(12),K=c.n(D);function G(e){var t=e.onSubmit,c=Object(n.useState)(""),a=Object(f.a)(c,2),r=a[0],i=a[1];return Object(u.jsx)("header",{className:K.a.Searchbar,children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==r.trim()?t(r):W.b.error("Input query.")},className:K.a.SearchForm,children:[Object(u.jsx)("button",{type:"submit",className:K.a.SearchForm_button,children:Object(u.jsx)("span",{className:K.a.SearchForm_button_label,children:"Search"})}),Object(u.jsx)("input",{className:K.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",value:r,onChange:function(e){i(e.currentTarget.value.toLowerCase())}})]})})}var J=G;function R(e){var t=e.list,c=Object(s.i)().url,n=Object(s.g)();return Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:{pathname:"".concat(c,"/").concat(e.id),state:{from:{location:n,label:"Back to Movies search"}}},children:e.title})},e.id)}))})}G.defaultProps={onSubmit:function(){return null}};var Q=function(){var e,t=Object(n.useState)(""),c=Object(f.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(null),o=Object(f.a)(i,2),l=o[0],j=o[1],b=Object(s.f)(),h=Object(s.g)(),d=null!==(e=new URLSearchParams(h.search).get("query"))&&void 0!==e?e:"";return Object(n.useEffect)((function(){r(d)}),[]),Object(n.useEffect)((function(){console.log("query",a),""!==a.trim()&&(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return w("".concat(F,"search/movie?query=").concat(e,"&page=").concat(t,"&api_key=").concat(N))}(a).then((function(e){return j(e.results)})),b.push(Object(A.a)(Object(A.a)({},h),{},{search:"query=".concat(a)})))}),[a]),Object(n.useEffect)((function(){console.log("list",l)}),[l]),Object(u.jsxs)("div",{className:U.a.MoviesPage,style:{maxWidth:1170,margin:"0 auto"},children:[Object(u.jsx)(J,{onSubmit:function(e){r(e)}}),l&&Object(u.jsx)(R,{list:l}),Object(u.jsx)(W.a,{autoClose:3e3})]})};function V(){return Object(u.jsx)("h1",{children:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 :("})}function Y(){return Object(u.jsxs)(x,{children:[Object(u.jsx)(O,{}),Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{path:"/",exact:!0,children:Object(u.jsx)(E,{})}),Object(u.jsx)(s.a,{path:"/movies/:movieId",children:Object(u.jsx)(H,{})}),Object(u.jsx)(s.a,{path:"/movies",exact:!0,children:Object(u.jsx)(Q,{})}),Object(u.jsx)(s.a,{children:Object(u.jsx)(V,{})})]})]})}c(42),c(43),c(44);i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(Y,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.316fbdf2.chunk.js.map